# Database configuration
POSTGRES_USER=fiskai
POSTGRES_PASSWORD=change_me
POSTGRES_DB=fiskai
APP_PORT=3002

# Application runtime
DATABASE_URL=postgresql://fiskai:${POSTGRES_PASSWORD}@fiskai-db:5432/fiskai?schema=public
NEXTAUTH_URL=https://your-app.example.com
NEXTAUTH_SECRET=replace_with_random_32_chars
NEXT_PUBLIC_APP_NAME=FiskAI
NEXT_PUBLIC_APP_URL=https://your-app.example.com
EINVOICE_KEY_SECRET=replace_with_long_random_string

# Redis
REDIS_URL=redis://localhost:6379

# Worker config
WORKER_CONCURRENCY=2
BULLMQ_PREFIX=fiskai
JOB_RETENTION_HOURS=24

# Analytics (PostHog)
NEXT_PUBLIC_POSTHOG_KEY=
NEXT_PUBLIC_POSTHOG_HOST=https://eu.i.posthog.com

# AI/OCR Features
OPENAI_API_KEY=sk-your-openai-api-key-here

# Email sending (Resend)
RESEND_API_KEY=re_your_resend_api_key_here
RESEND_FROM_EMAIL=noreply@yourdomain.com
# Webhook secret for email tracking (get from Resend dashboard)
RESEND_WEBHOOK_SECRET=whsec_your_resend_webhook_secret

# WebAuthn/Passkeys
WEBAUTHN_RP_ID=erp.metrica.hr
WEBAUTHN_RP_NAME=FiskAI

# Bank Sync (GoCardless)
BANK_SYNC_PROVIDER=gocardless
GOCARDLESS_SECRET_ID=your_secret_id
GOCARDLESS_SECRET_KEY=your_secret_key
GOCARDLESS_BASE_URL=https://bankaccountdata.gocardless.com/api/v2

# Cron Protection - for authorizing scheduled job requests
# Generate with: openssl rand -hex 32
CRON_SECRET=

# Email Import - Gmail (reuse existing Google OAuth if available)
# GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET already used for auth

# Email Import - Microsoft/Outlook
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=

# Cloudflare R2 Storage
R2_ACCOUNT_ID=
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET_NAME=fiskai-documents

# Fiscalisation certificate encryption (32 bytes as 64 hex chars)
# Generate with: openssl rand -hex 32
FISCAL_CERT_KEY=

# Fiscal Demo Mode (set to "true" to bypass real FINA API)
FISCAL_DEMO_MODE=true

# Stripe Billing
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_PRICE_PAUSALNI=price_xxx  # 39 EUR/month
STRIPE_PRICE_STANDARD=price_xxx  # 99 EUR/month
STRIPE_PRICE_PRO=price_xxx       # 199 EUR/month

# Cloudflare Turnstile (Bot Protection)
# Get keys from: https://dash.cloudflare.com/?to=/:account/turnstile
NEXT_PUBLIC_TURNSTILE_SITE_KEY=
TURNSTILE_SECRET_KEY=

# Sentry Error Tracking
# Get your DSN from: https://sentry.io/settings/projects/your-project/keys/
SENTRY_DSN=https://xxxxx@xxxxx.ingest.sentry.io/xxxxx
NEXT_PUBLIC_SENTRY_DSN=https://xxxxx@xxxxx.ingest.sentry.io/xxxxx
SENTRY_ORG=your-org
SENTRY_PROJECT=fiskai
# Auth token for source map uploads (create at https://sentry.io/settings/auth-tokens/)
SENTRY_AUTH_TOKEN=

# === VISIBLE REASONING UX ===
# Enable/disable reasoning UX
REASONING_UX_ENABLED=false

# Reasoning mode: off | shadow | live
# - off: Legacy pipeline only
# - shadow: Both pipelines, legacy serves, new logs traces (mandatory before live)
# - live: New reasoning pipeline serves responses
REASONING_MODE=off

# Beta rollout percentage (0-100)
# Only applies when REASONING_MODE=live
REASONING_BETA_PERCENTAGE=0

# Article Agent (Ollama Cloud)
# Get API key from https://ollama.com/settings/keys
OLLAMA_API_KEY=
OLLAMA_ENDPOINT=https://ollama.com
OLLAMA_MODEL=qwen3-next:80b
OLLAMA_EMBED_MODEL=nomic-embed-text
OLLAMA_EMBED_DIMS=768

# Article Agent Thresholds (optional)
ARTICLE_AGENT_PASS_THRESHOLD=0.8
ARTICLE_AGENT_FAIL_THRESHOLD=0.5
ARTICLE_AGENT_MAX_ITERATIONS=3

# Watchdog Configuration
WATCHDOG_ENABLED=true
WATCHDOG_TIMEZONE=Europe/Zagreb

# Timing
SCOUT_START_HOUR=6
SCOUT_TIMEOUT_MINUTES=30
SCRAPE_TIMEOUT_HOUR=8

# Alerting
ADMIN_ALERT_EMAIL=admin@example.com
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxx/yyy/zzz
SLACK_CHANNEL=#fiskai-alerts

# Email (SMTP)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@fiskai.hr

# Thresholds (optional - defaults shown)
STALE_SOURCE_WARNING_DAYS=7
STALE_SOURCE_CRITICAL_DAYS=14
FAILURE_RATE_WARNING=0.3
FAILURE_RATE_CRITICAL=0.5
CONFIDENCE_WARNING=0.85
CONFIDENCE_CRITICAL=0.75
REJECTION_RATE_WARNING=0.4
REJECTION_RATE_CRITICAL=0.6

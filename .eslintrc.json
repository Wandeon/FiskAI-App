{
  "root": true,
  "extends": ["next/core-web-vitals", "next/typescript"],
  "plugins": ["fisk-design-system", "import"],
  "parserOptions": {
    "project": "./tsconfig.json"
  },
  "settings": {
    "import/resolver": {
      "typescript": {
        "alwaysTryTypes": true
      }
    }
  },
  "rules": {
    "@typescript-eslint/no-floating-promises": "error",
    "@typescript-eslint/no-misused-promises": [
      "error",
      {
        "checksVoidReturn": {
          "attributes": false
        }
      }
    ],
    "@typescript-eslint/no-explicit-any": "warn",
    "import/no-restricted-paths": [
      "error",
      {
        "basePath": "./src",
        "zones": [
          {
            "target": "components/ui/**/*",
            "from": [
              "components/patterns/**/*",
              "components/sections/**/*",
              "components/templates/**/*"
            ],
            "message": "Primitives cannot import upward. Use tokens or lib/utils only."
          },
          {
            "target": "components/motion/**/*",
            "from": [
              "components/patterns/**/*",
              "components/sections/**/*",
              "components/templates/**/*"
            ],
            "message": "Motion components cannot import upward. Use tokens or lib/utils only."
          },
          {
            "target": "components/patterns/**/*",
            "from": ["components/sections/**/*", "components/templates/**/*"],
            "message": "Patterns cannot import upward (sections or templates)."
          },
          {
            "target": "components/sections/**/*",
            "from": ["components/templates/**/*"],
            "message": "Sections cannot import upward (templates)."
          },
          {
            "target": "components/**/*",
            "from": ["app/**/*"],
            "message": "Components cannot import from app routes. Move shared code to lib/ or components/."
          }
        ]
      }
    ]
  },
  "overrides": [
    {
      "files": [
        "src/app/(app)/**/*",
        "src/app/(admin)/**/*",
        "src/app/(staff)/**/*",
        "src/components/**/*"
      ],
      "rules": {
        "fisk-design-system/no-hardcoded-colors": "warn"
      }
    },
    {
      "files": ["src/app/(marketing)/**/*"],
      "rules": {
        "fisk-design-system/no-hardcoded-colors": "warn"
      }
    },
    {
      "files": ["src/__tests__/**/*", "**/*.test.ts", "**/*.test.tsx"],
      "rules": {
        "@typescript-eslint/no-explicit-any": "off",
        "@typescript-eslint/no-unused-vars": "off",
        "@typescript-eslint/no-floating-promises": "off",
        "@typescript-eslint/no-misused-promises": "off"
      }
    },
    {
      "files": [
        "src/app/**/*.ts",
        "src/app/**/*.tsx",
        "src/lib/**/*.ts",
        "src/lib/**/*.tsx",
        "src/components/**/*.ts",
        "src/components/**/*.tsx",
        "src/stores/**/*.ts",
        "src/contexts/**/*.ts",
        "src/contexts/**/*.tsx",
        "src/hooks/**/*.ts",
        "src/hooks/**/*.tsx"
      ],
      "excludedFiles": [
        "src/domain/**/*",
        "src/application/**/*",
        "src/infrastructure/**/*",
        "src/interfaces/**/*"
      ],
      "rules": {
        "@typescript-eslint/no-floating-promises": "warn",
        "@typescript-eslint/no-misused-promises": "warn"
      }
    },
    {
      "files": ["src/domain/**/*.ts", "src/domain/**/*.tsx"],
      "rules": {
        "no-restricted-imports": [
          "error",
          {
            "patterns": [
              {
                "group": ["@prisma/*", "@prisma/client"],
                "message": "Domain layer cannot import Prisma. Use repository interfaces."
              },
              {
                "group": ["@/lib/db*", "@/infrastructure/*", "@/application/*", "@/interfaces/*"],
                "message": "Domain layer cannot import from infrastructure, application, or interfaces layers."
              },
              {
                "group": ["next/*", "next"],
                "message": "Domain layer cannot import Next.js. Keep domain pure."
              }
            ]
          }
        ],
        "no-restricted-syntax": [
          "error",
          {
            "selector": "CallExpression[callee.name='parseFloat']",
            "message": "parseFloat banned in domain/application. Use Money.fromString() or Decimal."
          },
          {
            "selector": "CallExpression[callee.object.name='Number'][callee.property.name='parseFloat']",
            "message": "Number.parseFloat banned. Use Money.fromString() or Decimal."
          },
          {
            "selector": "CallExpression[callee.property.name='toFixed']",
            "message": ".toFixed() banned in domain/application. Use Money.format() or Decimal methods."
          }
        ]
      }
    },
    {
      "files": ["src/application/**/*.ts", "src/application/**/*.tsx"],
      "rules": {
        "no-restricted-imports": [
          "error",
          {
            "patterns": [
              {
                "group": ["@prisma/*", "@prisma/client"],
                "message": "Application layer cannot import Prisma. Inject repositories."
              },
              {
                "group": ["@/infrastructure/*", "@/interfaces/*"],
                "message": "Application layer cannot import from infrastructure or interfaces layers."
              }
            ]
          }
        ],
        "no-restricted-syntax": [
          "error",
          {
            "selector": "CallExpression[callee.name='parseFloat']",
            "message": "parseFloat banned in domain/application. Use Money.fromString() or Decimal."
          },
          {
            "selector": "CallExpression[callee.object.name='Number'][callee.property.name='parseFloat']",
            "message": "Number.parseFloat banned. Use Money.fromString() or Decimal."
          },
          {
            "selector": "CallExpression[callee.property.name='toFixed']",
            "message": ".toFixed() banned in domain/application. Use Money.format() or Decimal methods."
          }
        ]
      }
    },
    {
      "files": ["src/components/**/*.ts", "src/components/**/*.tsx"],
      "rules": {
        "no-restricted-imports": [
          "error",
          {
            "patterns": [
              {
                "group": ["@prisma/*", "@prisma/client"],
                "message": "UI components cannot import Prisma directly. Use server actions or API routes."
              },
              {
                "group": ["@/lib/db*"],
                "message": "UI components cannot import database utilities directly."
              }
            ]
          }
        ]
      }
    }
  ]
}
